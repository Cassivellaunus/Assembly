	ORG 800H
START
	LXI H,POWITANIE
	RST 3
	LXI H,POWITANIE2
	RST 3
	LXI H,WYBOR
	RST 3
	RST 2
	CPI '~'
	JZ NEGACJA
	CPI '+'
	JZ DODAWANIE
	CPI '-'
	JZ ODEJMOWANIE
	JMP START
	HLT
NEGACJA
	LXI H,OPERAND1
	RST 3
	RST 5
	LXI H,WYNIK
	RST 3
	MOV A,D
	CMA
	RST 4
	MOV A,E
	CMA
	RST 4
	HLT		
DODAWANIE
	LXI H,OPERAND1
	RST 3
	RST 5
	MOV B,D
	MOV C,E
	LXI H,OPERAND2
	RST 3
	RST 5
	XCHG
	DAD B
	XCHG
	LXI H,WYNIK
	RST 3
	JC PRZEPELNIENIE
POWROT
	MOV A,D
	RST 4
	MOV A,E
	RST 4
	HLT
PRZEPELNIENIE
	MVI A,'1'
	RST 1
	JMP POWROT
ODEJMOWANIE
	STC		;WSKAZANIE CARRY
	CMC 	;NEGACJA CARRY
	LXI H,OPERAND1
	RST 3
	RST 5
	MOV B,D
	MOV C,E
	LXI H,OPERAND2
	RST 3
	RST 5
	MOV A,C
	SUB E
	MOV L,A
	MOV A,B
	SBB D
	MOV H,A
	JC INWERSJA
	XCHG
	LXI H,WYNIK
	RST 3
POWROT2
	MOV A,D
	RST 4
	MOV A,E
	RST 4
	HLT
INWERSJA
	STC
	CMC
	MOV A,E
	SUB C
	MOV L,A
	MOV A,D
	SBB B
	MOV H,A
	XCHG
	LXI H,WYNIK
	RST 3
	MVI A,'-'
	RST 1
	JMP POWROT2

POWITANIE DB '***Kalkulator 2018***'10,13,'@'
POWITANIE2 DB 'Dostepne operacje: ~, +, -',10,13,'@'
WYBOR DB 10,13,'Wybierz opcje: ','@'
OPERAND1 DB 10,13,'Podaj pierwszy operand: ','@'
OPERAND2 DB 10,13,'Podaj drugi operand: ','@'
WYNIK DB 10,13,'WYNIK: ','@'